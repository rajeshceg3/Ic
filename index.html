<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iceland Ring Route Interactive Map</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Using Inter font from Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        #map { 
            height: 100vh; 
            width: 100%;
            z-index: 10;
        }
        .leaflet-popup-content-wrapper {
            border-radius: 0.5rem;
        }
        .leaflet-popup-content {
            margin: 1rem;
            font-size: 1rem;
        }
        /* Custom scrollbar for sidebar */
        #poi-sidebar::-webkit-scrollbar {
            width: 8px;
        }
        #poi-sidebar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        #poi-sidebar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        #poi-sidebar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="flex flex-col md:flex-row h-screen">
        <!-- Sidebar for POI details -->
        <div id="poi-sidebar" class="w-full md:w-1/3 lg:w-1/4 bg-white shadow-lg p-6 overflow-y-auto transition-transform duration-300 ease-in-out transform -translate-x-full md:translate-x-0 z-20">
            <button id="close-sidebar" class="md:hidden absolute top-4 right-4 text-gray-600 hover:text-gray-900">
                <i class="fas fa-times fa-lg"></i>
            </button>
            <div id="poi-content">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Explore the Ring Road</h2>
                <p class="text-gray-600">Click on a marker on the map to discover Iceland's stunning points of interest. Each marker reveals a unique attraction waiting to be explored.</p>
                <div class="mt-6 border-t pt-4">
                    <h3 class="text-lg font-semibold text-gray-700">Route Information</h3>
                    <ul class="mt-2 text-gray-600 space-y-2">
                        <li><strong>Total Length:</strong> ~1,332 km (828 miles)</li>
                        <li><strong>Estimated Driving Time:</strong> ~16-17 hours (non-stop)</li>
                        <li><strong>Suggested Direction:</strong> Counter-clockwise (South coast first)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Main Map Area -->
        <div class="w-full md:w-2/3 lg:w-3/4 relative">
            <div id="map"></div>
             <button id="menu-button" class="md:hidden absolute top-4 left-4 bg-white p-2 rounded-full shadow-md z-30">
                <i class="fas fa-bars fa-lg"></i>
            </button>
             <button id="user-location-button" class="absolute bottom-4 right-4 bg-white p-3 rounded-full shadow-md z-30 hover:bg-gray-100 transition-colors">
                <i class="fas fa-location-arrow fa-lg text-blue-500"></i>
            </button>
        </div>
    </div>

    <script>
        // --- DATA ---
        // In a real application, this would likely come from an API
        const pointsOfInterest = [
            {
                name: "Þingvellir National Park",
                category: "park",
                description: "A site of historical, cultural, and geological significance, located in a rift valley that marks the crest of the Mid-Atlantic Ridge.",
                lat: 64.2558,
                lng: -21.1301,
                image: "https://placehold.co/400x300/6366f1/ffffff?text=Þingvellir",
                link: "https://en.wikipedia.org/wiki/Þingvellir"
            },
            {
                name: "Gullfoss",
                category: "waterfall",
                description: "An iconic waterfall located in the canyon of the Hvítá river in southwest Iceland. The water plummets down in two stages.",
                lat: 64.3271,
                lng: -20.1199,
                image: "https://placehold.co/400x300/34d399/ffffff?text=Gullfoss",
                link: "https://en.wikipedia.org/wiki/Gullfoss"
            },
            {
                name: "Geysir Geothermal Area",
                category: "geothermal",
                description: "Home to the highly active Strokkur geyser, which erupts every 5-10 minutes, and the eponymous, but largely dormant, Geysir.",
                lat: 64.3142,
                lng: -20.3006,
                image: "https://placehold.co/400x300/f59e0b/ffffff?text=Geysir",
                link: "https://en.wikipedia.org/wiki/Geysir"
            },
            {
                name: "Seljalandsfoss",
                category: "waterfall",
                description: "A breathtaking waterfall that you can walk behind, offering a unique perspective. It drops 60 meters over the cliffs of the former coastline.",
                lat: 63.6156,
                lng: -19.9886,
                image: "https://placehold.co/400x300/3b82f6/ffffff?text=Seljalandsfoss",
                link: "https://en.wikipedia.org/wiki/Seljalandsfoss"
            },
            {
                name: "Skógafoss",
                category: "waterfall",
                description: "One of the biggest waterfalls in the country with a width of 25 meters and a drop of 60 meters. A staircase leads to an observation platform.",
                lat: 63.5321,
                lng: -19.5114,
                image: "https://placehold.co/400x300/14b8a6/ffffff?text=Skógafoss",
                link: "https://en.wikipedia.org/wiki/Skógafoss"
            },
            {
                name: "Reynisfjara Black Sand Beach",
                category: "landmark",
                description: "World-famous black-sand beach found on the South Coast of Iceland, with its stunning basalt columns and powerful Atlantic waves.",
                lat: 63.4043,
                lng: -19.0436,
                image: "https://placehold.co/400x300/1f2937/ffffff?text=Reynisfjara",
                link: "https://en.wikipedia.org/wiki/Reynisfjara"
            },
            {
                name: "Vík í Mýrdal",
                category: "town",
                description: "A remote seafront village in south Iceland. It sits in the shadow of the Mýrdalsjökull glacier, which covers the Katla volcano.",
                lat: 63.4194,
                lng: -19.0064,
                image: "https://placehold.co/400x300/ef4444/ffffff?text=Vík",
                link: "https://en.wikipedia.org/wiki/Vík_í_Mýrdal"
            },
            {
                name: "Jökulsárlón Glacier Lagoon",
                category: "landmark",
                description: "A large glacial lake in southeast Iceland, on the edge of Vatnajökull National Park. It's filled with icebergs calving from the Breiðamerkurjökull glacier.",
                lat: 64.0484,
                lng: -16.1795,
                image: "https://placehold.co/400x300/0ea5e9/ffffff?text=Jökulsárlón",
                link: "https://en.wikipedia.org/wiki/Jökulsárlón"
            },
            {
                name: "Egilsstaðir",
                category: "town",
                description: "A town in east Iceland on the banks of the Lagarfljót river. It is the largest settlement of the Eastfjords.",
                lat: 65.2669,
                lng: -14.3948,
                image: "https://placehold.co/400x300/8b5cf6/ffffff?text=Egilsstaðir",
                link: "https://en.wikipedia.org/wiki/Egilsstaðir"
            },
             {
                name: "Mývatn",
                category: "geothermal",
                description: "A shallow lake situated in an area of active volcanism in the north of Iceland, known for its rich fauna of waterbirds.",
                lat: 65.6425,
                lng: -16.9929,
                image: "https://placehold.co/400x300/f97316/ffffff?text=Mývatn",
                link: "https://en.wikipedia.org/wiki/Mývatn"
            },
            {
                name: "Goðafoss",
                category: "waterfall",
                description: "The 'Waterfall of the Gods,' located in the Bárðardalur district of North-Central Iceland at the beginning of the Sprengisandur highland road.",
                lat: 65.6828,
                lng: -17.5503,
                image: "https://placehold.co/400x300/06b6d4/ffffff?text=Goðafoss",
                link: "https://en.wikipedia.org/wiki/Goðafoss"
            },
            {
                name: "Akureyri",
                category: "town",
                description: "Iceland's 'Capital of the North,' it is an important port and fishing centre. The town is located on the west side of the fjord Eyjafjörður.",
                lat: 65.6825,
                lng: -18.0908,
                image: "https://placehold.co/400x300/d946ef/ffffff?text=Akureyri",
                link: "https://en.wikipedia.org/wiki/Akureyri"
            },
            {
                name: "Reykjavík",
                category: "town",
                description: "The capital and largest city of Iceland. It is located in southwestern Iceland, on the southern shore of Faxaflói bay.",
                lat: 64.1466,
                lng: -21.9426,
                image: "https://placehold.co/400x300/ec4899/ffffff?text=Reykjavík",
                link: "https://en.wikipedia.org/wiki/Reykjavík"
            }
        ];
        
        // Ring Road Coordinates (a simplified path for visualization)
        const ringRoadCoords = [
            [64.1466, -21.9426], [63.973, -21.205], [63.6156, -19.9886], [63.4194, -19.0064], 
            [63.965, -17.985], [64.0484, -16.1795], [64.258, -15.209], [65.2669, -14.3948], 
            [65.6425, -16.9929], [65.6828, -17.5503], [65.6825, -18.0908], [65.08, -20.8], 
            [64.896, -22.5], [64.1466, -21.9426]
        ];

        // --- MAP INITIALIZATION ---
        const map = L.map('map').setView([64.9631, -19.0208], 6);

        // Using a visually appealing base map from CartoDB
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        // --- ROUTE & MARKERS ---
        // Draw the Ring Road
        const ringRoad = L.polyline(ringRoadCoords, { color: 'rgba(239, 68, 68, 0.8)', weight: 4 }).addTo(map);
        map.fitBounds(ringRoad.getBounds().pad(0.2));

        // Custom Icon definitions
        const icons = {
            waterfall: L.icon({ iconUrl: 'https://img.icons8.com/ios-filled/50/3b82f6/waterfall.png', iconSize: [32, 32], iconAnchor: [16, 32], popupAnchor: [0, -32] }),
            geothermal: L.icon({ iconUrl: 'https://img.icons8.com/ios-filled/50/f59e0b/geothermal.png', iconSize: [32, 32], iconAnchor: [16, 32], popupAnchor: [0, -32] }),
            town: L.icon({ iconUrl: 'https://img.icons8.com/ios-filled/50/ef4444/city.png', iconSize: [32, 32], iconAnchor: [16, 32], popupAnchor: [0, -32] }),
            landmark: L.icon({ iconUrl: 'https://img.icons8.com/ios-filled/50/1f2937/mountain.png', iconSize: [32, 32], iconAnchor: [16, 32], popupAnchor: [0, -32] }),
            park: L.icon({ iconUrl: 'https://img.icons8.com/ios-filled/50/6366f1/park.png', iconSize: [32, 32], iconAnchor: [16, 32], popupAnchor: [0, -32] }),
        };

        const sidebar = document.getElementById('poi-sidebar');
        const poiContent = document.getElementById('poi-content');

        // Add markers for each POI
        pointsOfInterest.forEach(poi => {
            const marker = L.marker([poi.lat, poi.lng], { icon: icons[poi.category] || icons.landmark }).addTo(map);
            
            marker.on('click', () => {
                updateSidebar(poi);
                if (window.innerWidth < 768) {
                    sidebar.classList.remove('-translate-x-full');
                }
            });
        });

        // --- UI INTERACTIVITY ---
        function updateSidebar(poi) {
            poiContent.innerHTML = `
                <h2 class="text-3xl font-bold mb-3 text-gray-900">${poi.name}</h2>
                <img src="${poi.image}" alt="${poi.name}" class="w-full h-48 object-cover rounded-lg shadow-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x300/cccccc/ffffff?text=Image+Not+Found';">
                <p class="text-gray-700 mb-4">${poi.description}</p>
                <a href="${poi.link}" target="_blank" rel="noopener noreferrer" class="inline-block bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                    Learn More <i class="fas fa-external-link-alt ml-1"></i>
                </a>
            `;
        }
        
        // Mobile sidebar toggle
        const menuButton = document.getElementById('menu-button');
        const closeSidebarButton = document.getElementById('close-sidebar');

        menuButton.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
        });

        closeSidebarButton.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
        });
        
        // User location functionality
        const userLocationButton = document.getElementById('user-location-button');
        let userMarker;
        let userAccuracyCircle;

        userLocationButton.addEventListener('click', () => {
            map.locate({setView: true, maxZoom: 13, watch: false});
        });

        map.on('locationfound', function(e) {
            const radius = e.accuracy / 2;

            if (userMarker) {
                map.removeLayer(userMarker);
                map.removeLayer(userAccuracyCircle);
            }

            userMarker = L.marker(e.latlng).addTo(map)
                .bindPopup(`You are within ${radius.toFixed(0)} meters from this point`).openPopup();
            
            userAccuracyCircle = L.circle(e.latlng, radius).addTo(map);
        });

        map.on('locationerror', function(e) {
            alert(e.message);
        });

    </script>
</body>
</html>

